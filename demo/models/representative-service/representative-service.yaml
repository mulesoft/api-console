openapi: 3.0.0
info:
  title: Authorized representative Service
  version: '1.0'
  contact:
    name: Authorized Representatives
    email: authrep@wellsfargo.com
  x-termsAndConditions: 'http://www.wellsfargo.com/tac/'
  description: |
    Authorized representative Service.
servers:
  - url: 'https://localhost:8080'
security:
  - Bearer: []
paths:
  '/customercontacts/v1/legalentity/{wcisId}/contacts{product}':
    get:
      description: Retrieve contacts for a legal entity by product or Role Type
      operationId: getLegalEntityByProduct
      parameters:
        #Headers
        - $ref: '#/components/parameters/X-REQUEST-ID'
        - $ref: '#/components/parameters/X-WF-CLIENT-ID'
        - $ref: '#/components/parameters/X-WF-CMP-ID'
        - $ref: '#/components/parameters/Host'
        - $ref: '#/components/parameters/X-WF-REQUEST-DATE'
        - $ref: '#/components/parameters/X-CORRELATION-ID'

        #path parameters
        - $ref: '#/components/parameters/wcisId'
        - $ref: '#/components/parameters/product'

      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSucessResponse'
          description: OK or Successful operation
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"

        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Request could not be fulfilled because of incorrect syntax
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Authentication error (proper authentication is required)
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: No authorization for the requested resource
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Requested resource cannot be found
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '405':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Requested method not supported
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '408':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Request timed out
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Requests conflicts with another request
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '429':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Too many requests within a certain timeframe
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '451':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Upgrade to service terms required
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal system error
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Service unavailable
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: unexpected error
          headers:
            X-REQUEST-ID:
              description: >-
                Value generated by this service to track the API request. It
                will be returned in the header of the response
              required: true
              schema:
                type: string
                minLength: 1
                maxLength: 36
                example: "3f75be40-e480-42b4-983f-1a53d42197vv"
  /streams:
    post:
      description: subscribes a client to receive out-of-band data
      parameters:
        - name: callbackUrl
          in: query
          required: true
          description: |
            the location where data will be sent.  Must be network accessible
            by the source server
          schema:
            type: string
            format: uri
            example: https://tonys-server.com
      responses:
        '201':
          description: subscription successfully created
          content:
            application/json:
              schema:
                description: subscription information
                required:
                  - subscriptionId
                properties:
                  subscriptionId:
                    description: this unique identifier allows management of the subscription
                    type: string
                    example: 2531329f-fb09-4ef7-887e-84e648214436
      callbacks:
        onData:
          '{$request.query.callbackUrl}/data':
            post:
              requestBody:
                description: subscription payload
                content:
                  application/json:
                    schema:
                      type: object
                      properties:
                        timestamp:
                          type: string
                          format: date-time
                        userData:
                          type: string
              responses:
                '202':
                  description: |
                    Your server implementation should return this HTTP status code
                    if the data was received successfully
                '204':
                  description: |
                    Your server should return this HTTP status code if no longer interested
                    in further updates

components:
  securitySchemes:
    Bearer:
      type: apiKey
      name: Authorization
      in: header

  schemas:
    AddContactRequest:
      type: object
      description: Schema for AddContact request body
      properties:
        data:
          type: object
          properties:
            legalEntity:
              $ref: '#/components/schemas/LegalEntityDescriptor'
    LegalEntityDescriptor:
      type: object
      properties:
        leEntityId:
          type: integer
          format: int32
          example: 123
        parentEntityId:
          type: integer
          format: int32
          example: 345
        entityName:
          type: string
          example: "ABC Inc."
        wcisClientId:
          type: integer
          format: int32
          example: 1001
        legalEntityActiveFlag:
          type: boolean
        parties:
          type: array
          items:
            $ref: '#/components/schemas/PartyDescriptor'
    AddressDescriptor:
      type: object
      description: Schema for Contact address
      properties:
        addressTypeDescription:
          type: string
          example: Office
        addressLine1:
          type: string
          example: "123 Main Street"
        addressLine2:
          type: string
          example: "Suite 201"
        city:
          type: string
          example: "San Francisco"
        state:
          type: string
          example: CA
        postalCode:
          type: string
          example: "90002"
        country:
          type: string
          example: "USA"
    PhoneDescriptor:
      type: object
      description: Schema for Contact phone
      properties:
        phoneTypeDescription:
          type: string
          example: Work
        countryCode:
          type: string
          example: USA
        areaCode:
          type: string
          example: "415"
        phoneNumber:
          type: string
          example: "123-4567"
    EmailDescriptor:
      type: object
      description: Schema for Contact email address
      properties:
        emailTypeDescription:
          type: string
          example: Work
        emailAddress:
          type: string
          example: 123@abcinc.com
    PartyDescriptor:
      type: object
      properties:
        firstName:
          type: string
          example: John
        lastName:
          type: string
          example: Sten
        fullName:
          type: string
          example: John Sten
        dateOfBirth:
          type: string
          format: date
          example: "2001-01-30"
        contactId:
          type: integer
          format: int64
          example: 1002
        partyCountry:
          type: string
          example: USA
        partyActiveFlag:
          type: boolean
        partyRole:
          $ref: '#/components/schemas/PartyRoleDescriptor'
        products:
          $ref: '#/components/schemas/ProductDescriptor'
        address:
          $ref: '#/components/schemas/AddressDescriptor'
        phones:
          type: array
          items:
            $ref: '#/components/schemas/PhoneDescriptor'
        email:
          $ref: '#/components/schemas/EmailDescriptor'
    PartyRoleDescriptor:
      type: object
      properties:
        role:
          type: string
          example: AR
        partyRoleDoc:
          $ref: '#/components/schemas/PartyRoleDocDescriptor'
    PartyRoleDocDescriptor:
      type: object
      properties:
        partyRoleDocGUID:
          type: string
          example: ABC123
        partyRoleDocType:
          type: string
          example: Statement
        partyRoleDocStatus:
          type: string
          example: Good
    ProductDescriptor:
      type: object
      properties:
        DDA:
          type: boolean
        CRE:
          type: boolean
        FX:
          type: boolean
        ALL:
          type: boolean
    SucessResponse:
      type: object
      required:
        - success_code
        - description
      properties:
        data:
          type: object
          properties:
            responseStatus:
              $ref: '#/components/schemas/ResponseStatus'
            description:
              type: string
              description: >
                A human-readable explanation. The message is not intended for
                algorithmic processing and is subject to change.
              example: Successfully updated
              minLength: 1
              maxLength: 100
            # legalEntity:
            #   $ref: '#/components/schemas/LegalEntityDescriptor'
    GetSucessResponse:
      type: object
      required:
        - success_code
        - description
      properties:
        data:
          type: object
          properties:
            responseStatus:
              $ref: '#/components/schemas/ResponseStatus'
            description:
              type: string
              description: >
                A human-readable explanation. The message is not intended for
                algorithmic processing and is subject to change.
              example: Successfully Retrieved
              minLength: 1
              maxLength: 100
            legalEntity:
              $ref: '#/components/schemas/LegalEntityDescriptor'
    ResponseStatus:
      type: object
      description: An object describing the result of processing.
      properties:
        status:
          type: string
          example: Success
        message:
          type: string
          example: Transaction complete
    ErrorResponse:
      type: object
      properties:
        errors:
          type: array
          description: A list of one or more errors describing the cause.
          items:
            $ref: '#/components/schemas/Error'
    Error:
      type: object
      required:
        - error_code
        - error_id
        - description
      properties:
        error_code:
          type: string
          description: Error code similar to the HTTP error code.
          minLength: 3
          maxLength: 5
          example: "400"
        error_id:
          type: string
          description: A code describing the result of processing.
          minLength: 7
          maxLength: 8
          example: "400-008"
        description:
          type: string
          description: >
            A human-readable explanation. The message is not intended for
            algorithmic processing and is subject to change.
          example: Missing required field in body
          minLength: 1
          maxLength: 100
        field_name:
          type: string
          description: The field name where the error occurred.
          example: "wcis_id"
        field_value:
          type: string
          description: Field value entered in the request by the user.
          example: "123456789"
        api_specification_url:
          type: string
          description: A link to the API specification.
          example: 'http://developer.wellsfargo.com/docs'
  parameters:
    X-REQUEST-ID:
      in: header
      name: X-REQUEST-ID
      description: >
        Required. Identifier of API request message instance, to provide
        tracking. Length must be between 1 and 36.
      required: true
      schema:
        type: string
        minLength: 1
        maxLength: 36
        example: "3f75be40-e480-42b4-983f-1a53d42197vv"
    X-WF-REQUEST-DATE:
      in: header
      name: X-WF-REQUEST-DATE
      required: true
      style: simple
      description: |
        Required. Time when the API is called in be ISO 8601 format.
      schema:
        type: string
        format: date-time
        example: "2021-09-02 18:12:00+0530"
    X-WF-CLIENT-ID:
      in: header
      name: X-WF-CLIENT-ID
      required: true
      style: simple
      description: |
        Required. Identifier of calling application.
      schema:
        type: string
        minLength: 2
        maxLength: 5
        example: WCAO
    X-WF-CMP-ID:
      in: header
      name: X-WF-CMP-ID
      required: true
      style: simple
      description: "Client needs to send this to identify real(1) vs mock(0) service."
      schema:
        type: integer
        format: int32
        example: 0
    X-CORRELATION-ID:
      in: header
      name: X-CORRELATION-ID
      #required: true
      style: simple
      description: "Correlates HTTP requests between a client and server. In the event of a 
      north/south traffic pattern and where is it not present, the gateway SHOULD instantiate 
      a unique identifier and populate this field in the request header."
      schema:
        type: string
        format: UUID
        example: "13871-893s-dd19-8378-1379jksfj"
    Host:
      in: header
      name: Host
      required: true
      style: simple
      description: |
        Required. Hostname of the server calling this API.
      schema:
        type: string
        minLength: 2
        maxLength: 50
        example: "CA02434-wcaoarservices-dev2"
    wcisId:
      in: path
      name: wcisId
      required: true
      schema:
        type: integer
        format: int64
        minLength: 1
        maxLength: 36
        example: 1001
        description: "The WCIS id of the Legal entity"
    contactId:
      in: path
      name: contactId
      required: true
      schema:
        type: integer
        format: int64
        maxLength: 9
        example: 1002
        description: "The contact id of the contact"
    firstName:
      in: path
      name: firstName
      required: true
      schema:
        type: string
        maxLength: 100
        example: "John"
      style: matrix
    lastName:
      in: path
      name: lastName
      required: true
      schema:
        type: string
        maxLength: 128
        example: "Sten"
      style: matrix
    emailId:
      in: path
      name: emailId
      required: true
      schema:
        type: string
        example: "123@abcinc.com"
        description: "Party Email id"
      style: matrix
    phoneNumber:
      in: path
      name: phoneNumber
      required: true
      schema:
        type: string
        maxLength: 150
        example: "123-4567"
        description: "Party phone number"
      style: matrix
    roleType:
      in: path
      name: roleType
      required: true
      description: "The role type of the party"
      schema:
        type: string
        maxLength: 150
        example: "AR"
      style: matrix
    product:
      in: path
      name: product
      required: true
      description: "Products e.g. ALL, DDA, FX, CRE"
      schema:
        type: string
        maxLength: 150
        example: "ALL"
      style: matrix
    SenderMessageId:
      name: WF-senderMessageId
      in: header
      description: >
        Required. Identifier of API request message instance, to provide
        tracking. Length must be between 1 and 36
      required: true
      schema:
        type: string
        minLength: 1
        maxLength: 36
    SenderApplicationId:
      name: WF-senderApplicationId
      in: header
      description: |
        Required. Identifier of calling application.
      required: true
      schema:
        type: string
    SenderHostName:
      name: WF-senderHostName
      in: header
      description: |
        Required. Hostname of the server calling this API.
      required: true
      schema:
        type: string
    CreationTimeStamp:
      name: WF-creationTimeStamp
      in: header
      description: |
        Required. Time when the API is called in be ISO 8601 format.
      required: true
      schema:
        type: string
        example: '2021-08-15T11:12:00+05:30'
    SenderMessageIdEcho:
      name: WF-senderMessageIdEcho
      in: header
      description: >
        Required in response. This will have the same value a the
        senderMessageId present in the request
      required: true
      schema:
        type: string
        minLength: 1
        maxLength: 36

